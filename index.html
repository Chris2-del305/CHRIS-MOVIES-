<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chris Movies ¬∑ Simple & Fast</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0b0b0b;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: #f5f5f5;
      line-height: 1.5;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      height: 70px;
      background: linear-gradient(180deg, #141414 0%, rgba(20,20,20,0.9) 90%);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      z-index: 1000;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    .logo {
      color: #e50914;
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.5px;
      text-transform: uppercase;
    }

    .menu {
      font-size: 32px;
      cursor: pointer;
      padding: 5px 15px;
      color: #fff;
      transition: 0.2s;
      line-height: 1;
    }
    .menu:hover { color: #e50914; }

    .dropdown {
      position: absolute;
      right: 20px;
      top: 70px;
      background: #1f1f1f;
      border-radius: 12px;
      display: none;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 1px solid #333;
      z-index: 1001;
      min-width: 160px;
    }
    .dropdown button {
      background: none;
      border: none;
      color: #eee;
      padding: 14px 20px;
      width: 100%;
      text-align: left;
      cursor: pointer;
      font-size: 16px;
    }
    .dropdown button:hover { background: #2e2e2e; color: #e50914; }

    .top-search {
      margin-top: 90px;
      padding: 0 30px;
    }
    .top-search input {
      width: 100%;
      max-width: 600px;
      padding: 15px 20px;
      border-radius: 40px;
      border: none;
      background: #2a2a2a;
      color: white;
      font-size: 16px;
      outline: none;
      border: 1px solid #3a3a3a;
      display: block;
      margin: 0 auto;
    }
    .top-search input:focus { border-color: #e50914; }

    .hero {
      height: 60vh;
      min-height: 400px;
      background: linear-gradient(0deg, rgba(11,11,11,1) 0%, rgba(11,11,11,0.7) 100%), 
                  url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=1200') center/cover no-repeat;
      display: flex;
      align-items: flex-end;
      padding: 0 30px 60px 30px;
      margin-bottom: 20px;
    }
    .hero h1 {
      font-size: clamp(32px, 5vw, 56px);
      font-weight: 800;
      max-width: 800px;
      line-height: 1.2;
      text-shadow: 0 4px 12px rgba(0,0,0,0.7);
      color: #fff;
    }
    .hero h1 span { color: #e50914; }

    section { padding: 10px 30px 30px; }

    h2 {
      font-size: 28px;
      font-weight: 600;
      margin: 30px 0 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .movies-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 20px;
    }

    .movie-card {
      background: #1e1e1e;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
      border: 1px solid #2c2c2c;
      position: relative;
      aspect-ratio: 2/3;
    }
    .movie-card:hover {
      transform: scale(1.05);
      border-color: #e50914;
    }
    .movie-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      background: #333;
    }
    .vip-lock {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      color: #ffd700;
      font-size: 20px;
      padding: 5px 8px;
      border-radius: 50%;
      z-index: 10;
      backdrop-filter: blur(2px);
      border: 1px solid #ffd700;
    }
    .movie-info {
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0,0,0,0.7);
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      transform: translateY(100%);
      transition: transform 0.2s;
      z-index: 5;
    }
    .movie-card:hover .movie-info { transform: translateY(0); }
    .like-btn, .comment-btn {
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .like-btn.liked { color: #e50914; }

    #vipBall {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: radial-gradient(circle at 30% 30%, #f9e57c, #e5b800);
      color: black;
      font-weight: 800;
      font-size: 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255,215,0,0.5);
      border: 2px solid rgba(255,255,255,0.2);
      z-index: 100;
    }

    .bar {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .bar input {
      flex: 1;
      min-width: 200px;
      padding: 14px 18px;
      border-radius: 40px;
      border: none;
      background: #262626;
      color: white;
      font-size: 16px;
      outline: none;
      border: 1px solid #3a3a3a;
    }
    .bar button {
      padding: 14px 28px;
      border-radius: 40px;
      border: none;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      background: #e50914;
      color: white;
    }
    .whatsapp { background: #25D366 !important; }

    #toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(20,20,20,0.95);
      backdrop-filter: blur(8px);
      color: white;
      padding: 14px 30px;
      border-radius: 50px;
      font-size: 16px;
      display: none;
      z-index: 3000;
      border: 1px solid #333;
    }

    .modal-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(5px);
      z-index: 2000;
      display: none;
    }
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a;
      padding: 30px;
      border-radius: 24px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.7);
      z-index: 2100;
      display: none;
      width: 340px;
      max-width: 90%;
      border: 1px solid #333;
      color: #fff;
    }
    .modal h3 { margin: 0 0 20px; color: #e50914; }
    .modal button {
      width: 100%;
      margin: 8px 0;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }
    .modal .btn-weekly { background: #e50914; color: white; }
    .modal .btn-monthly { background: #7209b7; color: white; }
    .modal .btn-close { background: #2a2a2a; color: #aaa; }
    .modal .close-icon {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
    }

    #videoModal {
      width: 90%;
      max-width: 800px;
      background: black;
      padding: 0;
    }
    #videoPlayer {
      width: 100%;
      min-height: 200px;
      background: #000;
    }
    #videoPlayer video, #videoPlayer iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    #adminPanel {
      width: 400px;
      max-width: 95%;
      max-height: 80vh;
      overflow-y: auto;
    }
    #adminPanel input, #adminPanel select {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      background: #262626;
      border: 1px solid #3a3a3a;
      border-radius: 8px;
      color: white;
      font-size: 15px;
    }
    #adminPanel hr { border: none; border-top: 1px solid #333; margin: 20px 0; }

    #commentModal {
      width: 400px;
      max-width: 95%;
    }
    .comment-list {
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 15px;
      background: #262626;
      padding: 10px;
      border-radius: 8px;
    }
    .comment-item {
      padding: 8px;
      border-bottom: 1px solid #333;
      font-size: 14px;
    }
    #commentInput {
      width: 100%;
      padding: 12px;
      background: #262626;
      border: 1px solid #3a3a3a;
      border-radius: 8px;
      color: white;
      margin-bottom: 10px;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #777;
      border-top: 1px solid #222;
      margin-top: 30px;
    }
  </style>
</head>
<body>

<header>
  <div class="logo">Chris Movies</div>
  <div class="menu" id="menuBtn">‚ãÆ</div>
  <div class="dropdown" id="dropdownMenu">
    <button onclick="adminLogin()">Admin Panel</button>
  </div>
</header>

<div class="top-search">
  <input id="searchInput" placeholder="Search for movies...">
</div>

<div class="hero">
  <h1>Unlimited <span>Movies</span>, VIP & Free</h1>
</div>

<section>
  <div class="bar">
    <input id="request" placeholder="Request a movie (e.g., Avengers)">
    <button class="whatsapp" onclick="requestMovie()">Request via WhatsApp</button>
  </div>
  <div class="bar">
    <input id="vipCode" placeholder="Enter VIP password">
    <button onclick="unlockVIP()">Unlock VIP</button>
  </div>

  <h2><i>üé¨</i> All Movies</h2>
  <div class="movies-grid" id="moviesGrid"></div>
</section>

<footer>¬© 2025 Chris Movies ¬∑ Stream your favorites</footer>

<div id="toast"></div>

<!-- VIP Purchase Modal -->
<div class="modal-overlay" id="vipOverlay"></div>
<div class="modal" id="vipPurchasePanel">
  <button class="close-icon" id="closePurchasePanel">&times;</button>
  <h3>‚ú® Choose VIP Plan</h3>
  <button class="btn-weekly" id="buyWeekly">Weekly ‚Äì 6,000 UGX</button>
  <button class="btn-monthly" id="buyMonthly">Monthly ‚Äì 25,000 UGX</button>
  <button class="btn-close" id="closePurchasePanel2">Close</button>
</div>

<!-- Video Player Modal -->
<div class="modal-overlay" id="videoOverlay"></div>
<div class="modal" id="videoModal">
  <button class="close-icon" id="closeVideoModal">&times;</button>
  <div id="videoPlayer"></div>
</div>

<!-- Comment Modal -->
<div class="modal-overlay" id="commentOverlay"></div>
<div class="modal" id="commentModal">
  <button class="close-icon" id="closeCommentModal">&times;</button>
  <h3 id="commentMovieTitle">Comments</h3>
  <div class="comment-list" id="commentList"></div>
  <input type="text" id="commentInput" placeholder="Write a comment...">
  <button onclick="addComment()" id="addCommentBtn">Post Comment</button>
  <button class="btn-close" id="closeCommentModal2">Close</button>
</div>

<!-- Admin Panel (URLs only) -->
<div class="modal-overlay" id="adminOverlay"></div>
<div class="modal" id="adminPanel">
  <button class="close-icon" id="closeAdminPanel">&times;</button>
  <h3>üõ†Ô∏è Add Movie (URLs only)</h3>
  <input type="text" id="posterUrl" placeholder="Poster image URL (direct link)" value="https://image.tmdb.org/t/p/w500/7W7PZR3f4UjY0lYq4wzG5dW9y6W.jpg">
  <input type="text" id="videoUrl" placeholder="Video URL (YouTube or direct MP4)" value="https://www.youtube.com/watch?v=t-adYJsfmgM">
  <input type="text" id="name" placeholder="Movie name" value="Duck Duck Goose">
  <select id="isVip">
    <option value="false">Free</option>
    <option value="true">VIP</option>
  </select>
  <button onclick="addMovie()">Add Movie</button>
  <hr>
  <p style="color:#aaa; font-size:14px;">Movies are saved in your browser. No uploads ‚Äì just paste URLs.</p>
  <button onclick="resetToDemo()" style="background:#444;">Reset to Demo Movies</button>
</div>

<script>
  // ----- LOCAL STORAGE MOVIE MANAGER -----
  const STORAGE_KEY = 'chrisMovies';
  let movies = [];

  // Load from localStorage or initialize with demo movies
  function loadMovies() {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) {
      try { movies = JSON.parse(stored); }
      catch { movies = []; }
    }
    if (!movies || movies.length === 0) {
      // Demo movies
      movies = [
        { id: '1', title: 'Duck Duck Goose', poster: 'https://image.tmdb.org/t/p/w500/7W7PZR3f4UjY0lYq4wzG5dW9y6W.jpg', video: 'https://www.youtube.com/watch?v=t-adYJsfmgM', vip: 'false', likes: 42, comments: ['Cute movie!', 'My kids love it'] },
        { id: '2', title: 'Chris Watts (VIP)', poster: 'https://m.media-amazon.com/images/M/MV5BOTY4YjI2N2MtYmU0Mi00ZmEzLWE2OTYtNzY0MTE1ZmRlN2QwXkEyXkFqcGc@._V1_.jpg', video: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', vip: 'true', likes: 12, comments: ['Crazy story'] },
        { id: '3', title: 'Big Buck Bunny', poster: 'https://upload.wikimedia.org/wikipedia/commons/c/c5/Big_buck_bunny_poster_big.jpg', video: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', vip: 'false', likes: 27, comments: ['Classic'] }
      ];
      saveMovies();
    }
    renderMovies(movies);
  }

  function saveMovies() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(movies));
  }

  // Render filtered list
  function renderMovies(list) {
    const grid = document.getElementById('moviesGrid');
    grid.innerHTML = '';
    list.forEach(m => {
      const card = document.createElement('div');
      card.className = 'movie-card';
      const lock = m.vip === 'true' ? '<div class="vip-lock">üîí</div>' : '';
      card.innerHTML = `
        <img src="${m.poster}" alt="${m.title}" onerror="this.src='https://via.placeholder.com/300x450?text=No+Poster'">
        ${lock}
        <div class="movie-info">
          <button class="like-btn" data-id="${m.id}" data-liked="false">‚ù§Ô∏è <span>${m.likes || 0}</span></button>
          <button class="comment-btn" data-id="${m.id}">üí¨ <span>${(m.comments && m.comments.length) || 0}</span></button>
        </div>
      `;

      card.addEventListener('click', (e) => {
        if (e.target.closest('button')) return;
        if (m.vip === 'true' && !isVipActive()) {
          showToast('üîí VIP movie! Tap the gold button to buy access.');
          return;
        }
        openVideoPlayer(m.video);
      });

      const likeBtn = card.querySelector('.like-btn');
      likeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const id = likeBtn.dataset.id;
        const movie = movies.find(m => m.id === id);
        if (movie) {
          movie.likes = (movie.likes || 0) + (likeBtn.dataset.liked === 'true' ? -1 : 1);
          likeBtn.dataset.liked = likeBtn.dataset.liked === 'true' ? 'false' : 'true';
          likeBtn.querySelector('span').textContent = movie.likes;
          likeBtn.classList.toggle('liked');
          saveMovies();
        }
      });

      const commentBtn = card.querySelector('.comment-btn');
      commentBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        openCommentModal(m.id, m.title);
      });

      grid.appendChild(card);
    });
  }

  // Search
  document.getElementById('searchInput').addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    const filtered = movies.filter(m => m.title.toLowerCase().includes(term));
    renderMovies(filtered);
  });

  // VIP status
  function isVipActive() {
    const data = localStorage.getItem('vipData');
    if (!data) return false;
    try {
      const { expiry } = JSON.parse(data);
      return new Date(expiry) > new Date();
    } catch { return false; }
  }

  // Video player (clean YouTube)
  function openVideoPlayer(url) {
    const modal = document.getElementById('videoModal');
    const overlay = document.getElementById('videoOverlay');
    const player = document.getElementById('videoPlayer');
    player.innerHTML = '';

    const youtubeMatch = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i);
    if (youtubeMatch) {
      const videoId = youtubeMatch[1];
      const iframe = document.createElement('iframe');
      iframe.src = `https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&iv_load_policy=3&controls=1&playsinline=1`;
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      iframe.allowFullscreen = true;
      iframe.style.width = '100%';
      iframe.style.height = '100%';
      iframe.style.border = 'none';
      player.appendChild(iframe);
    } else {
      const video = document.createElement('video');
      video.src = url;
      video.controls = true;
      video.autoplay = true;
      video.playsInline = true;
      video.style.width = '100%';
      video.style.height = 'auto';
      video.onerror = () => showToast('‚ùå Video failed to load.');
      player.appendChild(video);
    }

    modal.style.display = 'block';
    overlay.style.display = 'block';
  }

  // Close video
  document.getElementById('closeVideoModal').addEventListener('click', closeVideo);
  document.getElementById('videoOverlay').addEventListener('click', closeVideo);
  function closeVideo() {
    document.getElementById('videoPlayer').innerHTML = '';
    document.getElementById('videoOverlay').style.display = 'none';
    document.getElementById('videoModal').style.display = 'none';
  }

  // Toast
  function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.innerText = msg;
    toast.style.display = 'block';
    toast.style.opacity = '1';
    setTimeout(() => {
      toast.style.opacity = '0';
      setTimeout(() => toast.style.display = 'none', 500);
    }, 3000);
  }

  // Comment modal
  let currentCommentMovieId = null;
  function openCommentModal(id, title) {
    currentCommentMovieId = id;
    document.getElementById('commentMovieTitle').textContent = `Comments - ${title}`;
    const movie = movies.find(m => m.id === id);
    const comments = movie?.comments || [];
    const list = document.getElementById('commentList');
    list.innerHTML = '';
    comments.forEach(c => {
      const div = document.createElement('div');
      div.className = 'comment-item';
      div.textContent = c;
      list.appendChild(div);
    });
    document.getElementById('commentOverlay').style.display = 'block';
    document.getElementById('commentModal').style.display = 'block';
  }

  window.addComment = function() {
    if (!currentCommentMovieId) return;
    const input = document.getElementById('commentInput');
    const comment = input.value.trim();
    if (!comment) return;
    const movie = movies.find(m => m.id === currentCommentMovieId);
    if (movie) {
      if (!movie.comments) movie.comments = [];
      movie.comments.push(comment);
      saveMovies();
      input.value = '';
      openCommentModal(currentCommentMovieId, movie.title);
    }
  };

  // Close comment
  document.getElementById('closeCommentModal').addEventListener('click', closeComment);
  document.getElementById('closeCommentModal2').addEventListener('click', closeComment);
  document.getElementById('commentOverlay').addEventListener('click', closeComment);
  function closeComment() {
    document.getElementById('commentOverlay').style.display = 'none';
    document.getElementById('commentModal').style.display = 'none';
  }

  // Admin
  window.adminLogin = function() {
    const pwd = prompt('Admin password:');
    if (pwd === 'admin123') {
      document.getElementById('adminOverlay').style.display = 'block';
      document.getElementById('adminPanel').style.display = 'block';
      document.getElementById('dropdownMenu').style.display = 'none';
    } else showToast('Incorrect password');
  };

  document.getElementById('closeAdminPanel').addEventListener('click', closeAdmin);
  document.getElementById('adminOverlay').addEventListener('click', closeAdmin);
  function closeAdmin() {
    document.getElementById('adminOverlay').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'none';
  }

  window.addMovie = function() {
    const poster = document.getElementById('posterUrl').value.trim();
    const video = document.getElementById('videoUrl').value.trim();
    const title = document.getElementById('name').value.trim();
    const vip = document.getElementById('isVip').value;

    if (!poster || !video || !title) {
      showToast('Please fill all fields');
      return;
    }

    const newMovie = {
      id: Date.now().toString(),
      title,
      poster,
      video,
      vip,
      likes: 0,
      comments: []
    };
    movies.push(newMovie);
    saveMovies();
    renderMovies(movies);
    closeAdmin();
    showToast('‚úÖ Movie added!');
  };

  window.resetToDemo = function() {
    localStorage.removeItem(STORAGE_KEY);
    loadMovies();
    closeAdmin();
    showToast('Demo movies loaded');
  };

  // VIP unlock
  const WEEKLY = 'WEEK2025';
  const MONTHLY = 'MONTH2025';
  window.unlockVIP = function() {
    const code = document.getElementById('vipCode').value.trim();
    if (!code) return showToast('Enter password');
    const expiry = new Date();
    if (code === WEEKLY) expiry.setDate(expiry.getDate() + 7);
    else if (code === MONTHLY) expiry.setDate(expiry.getDate() + 30);
    else return showToast('Incorrect password');
    localStorage.setItem('vipData', JSON.stringify({ code, expiry: expiry.toISOString() }));
    showToast(`VIP unlocked for ${code === WEEKLY ? '7' : '30'} days!`);
  };

  window.requestMovie = function() {
    const name = document.getElementById('request').value.trim();
    if (!name) return showToast('Enter movie name');
    window.open(`https://wa.me/256753747474?text=Request: ${encodeURIComponent(name)}`, '_blank');
  };

  // VIP purchase
  const vipBall = document.getElementById('vipBall');
  const purchasePanel = document.getElementById('vipPurchasePanel');
  const vipOverlay = document.getElementById('vipOverlay');
  const closePurchase = document.getElementById('closePurchasePanel');
  const closePurchase2 = document.getElementById('closePurchasePanel2');
  const buyWeekly = document.getElementById('buyWeekly');
  const buyMonthly = document.getElementById('buyMonthly');

  function showPurchase() {
    purchasePanel.style.display = 'block';
    vipOverlay.style.display = 'block';
  }
  function hidePurchase() {
    purchasePanel.style.display = 'none';
    vipOverlay.style.display = 'none';
  }
  vipBall.addEventListener('click', showPurchase);
  vipOverlay.addEventListener('click', hidePurchase);
  closePurchase.addEventListener('click', hidePurchase);
  closePurchase2.addEventListener('click', hidePurchase);

  buyWeekly.addEventListener('click', () => {
    window.open('https://wa.me/256753747474?text=Buy%20Weekly%20VIP%206000%20UGX', '_blank');
    hidePurchase();
  });
  buyMonthly.addEventListener('click', () => {
    window.open('https://wa.me/256753747474?text=Buy%20Monthly%20VIP%2025000%20UGX', '_blank');
    hidePurchase();
  });

  // Dropdown
  const menuBtn = document.getElementById('menuBtn');
  const dropdown = document.getElementById('dropdownMenu');
  menuBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
  });
  document.addEventListener('click', (e) => {
    if (!menuBtn.contains(e.target) && !dropdown.contains(e.target)) dropdown.style.display = 'none';
  });

  // Initial load
  loadMovies();
</script>
</body>
  </html>
